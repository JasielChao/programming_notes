<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Just for Testing</title>
</head>
<body>

    <!-- Picture Tag -->
    <picture>
        <source media="(max-width:650px)" srcset="img_pink_flowers.jpg">
        <source srcset="img.webp" type="image/webp">
        <source srcset="img.jpg" type="image/jpeg"> 
        <img src="img_orange_flowers.jpg" alt="Flowers" style="width:auto;"   onerror="this.onerror = null;this.parentNode.children[0].srcset = this.parentNode.children[1].srcset;  this.parentNode.children[1].srcset = this.src;" />
    </picture>

    <!-- Video Tag -->
    <video width="100" height="100" id='videoHero' muted playsinline autoplay loop src="/huckins-sportsman-38-hero-video.mp4"
        poster="/preload-video-homepage.webp" >
    </video>

    <script defer>
        document.addEventListener('DOMContentLoaded', ()=>{

            /* Video Hero Deferred */
            let videoHero = document.querySelector('#videoHero');
            let widthScreem = window.innerWidth;
            let videoLoaded = false;

            function loadVideo (scroll, mouse){
                if(videoHero && videoLoaded == false){
                    /* To make responsive the video and compatible with any browser */
                    if (widthScreem < 768){
                        videoHero.src = "<?php echo get_template_directory_uri();?>/re-build/assets/videos/about-us-new-video-hero-mobile.mp4";
                        videoHero.poster = "<?php echo $heroVideoImgMobile;?>";
                        /* To auto play video in safari */
                        setTimeout(()=>{ videoHero.play(); }, 400)
                    }else{
                        videoHero.src = "<?php echo get_template_directory_uri();?>/re-build/assets/videos/about-us-new-video-hero.mp4";
                        /* To auto play video in safari */
                        setTimeout(()=>{ videoHero.play(); }, 300)
                    }

                    videoLoaded = true;
                }

                if(scroll){
                    document.removeEventListener("scroll", loadVideo);
                }

                if(mouse){
                    document.removeEventListener("mousemove", loadVideo);
                }
            }

            setTimeout(() => {
                loadVideo();
            }, 7000);

            document.addEventListener("scroll", loadVideo);
            document.addEventListener("mousemove", loadVideo);

            /* Video Hero Deferred */
        });
    </script>

    <!-- Thumbnail Youtube Example: https://img.youtube.com/vi/I1t-x5OuOEw/maxresdefault.jpg-->
    <div>
        <script>
           // Max Resolution maxresdefault.jpg
            // Standart Hight Resolution hqdefault.jpg

            //Function to prevent missing maxresdefault images youtube 
            document.addEventListener('DOMContentLoaded', ()=>{
                    let maxresdefault = document.querySelectorAll('.maxresdefault');

                    if(maxresdefault){
                        maxresdefault.forEach(thumbnail => {

                        if (thumbnail.naturalWidth < 300){
                            //If the URL has parameters
                            if(thumbnail.src.includes("?")){
                                //Remove all parameters
                                thumbnail.src = thumbnail.src.split('?')[0];
                                // add the image to the URL
                                thumbnail.src = thumbnail.src + "/maxresdefault.jpg"
                                // Let's check this image second time just in case
                                setTimeout(() => {
                                    if (thumbnail.naturalWidth < 300){
                                        // Just replace the image to the next highest quality
                                        thumbnail.src = thumbnail.src.replace("maxresdefault", "hqdefault");
                                    }
                                }, 300);
                            }else{
                                // Just replace the image to the next highest quality
                                thumbnail.src = thumbnail.src.replace("maxresdefault", "hqdefault");
                            }
                        

                        
                        }
                        });
                    }
            })
        </script>

    </div>

    <!-- Cognito Forms-->
    <div>
        <!-- KEY:COGNITO v2 -->
        <div>
            <!-- [[KEY:COGNITO v2]] -->
                <script src="https://www.cognitoforms.com/f/seamless.js" data-key="or_12nlnoUKokQ0b0rrIVQ" data-form="1"></script>
                <script>
                Cognito.mount("2", ".cognito").prefill(
                        {
                        "PageTitle": document.title,
                        "PageUrl": window.location.href
                        });
                </script> 
        </div>

        <!-- Iframe KEY:COGNITO v2 -->
        <div>
            <!-- Documentation -> https://www.cognitoforms.com/support/168/style-publish/iframe-embedding -->
            <script>
                 Cognito("#cognito15").setCss("#cognito .cog-abuse {display: none;} .cog-branding  {display: none;};");
                Cognito("#form2").setCss("#cognito .cog-button--primary{background-color:#5ACEC8;}");
            </script>
            <script>Cognito.setCss('https://mysite.com/site.css');</script>

            <script>
                Cognito("#form1").prefill({"Name": {"First":"John","Last":"Smith"},"Phone":"8034567890","Email":"jsmith@gmail.com"});
                Cognito("#form2").prefill({"Name": {"First":"Jane","Last":"Murphy","Phone":"8030987654","Email":"jsmurphy@gmail.com"}});
            </script>

        </div>

        <!-- Lazy load cognito Iframe-->
        <div id='cognitoHere' class="cognito">

            <!--- Example of how looks the normal code cognito iframe 
                <iframe src="https://www.cognitoforms.com/f/zqSmu7YHj0aGFnkCnk9mhQ/2" style="border:0;width:100%;" height="517"></iframe>
                <script src="https://www.cognitoforms.com/f/iframe.js"></script>
            -->

            <!--- Now lets create a empty iframe for the cognito form with an ID -->
            <iframe id="cognitoIframe" src="" style="border:0;width:100%;" height="461"></iframe>

            <!--- Script to Lazy load the cognito Iframe -->
            <script defer>
                /* First Part: Lazy Cognito Form  */
                setTimeout(() => {
                    console.log('Starting the lazy load Cognito form ');
                    /* Note: 3 Seconds is the right time to escape the Google Audit */

                    /* Getting empty Cognito Iframe by ID */
                    let cognitoIframe2 = document.querySelector('#cognitoIframe');

                    /* Setting the original URL source of the cognito iframe */
                    cognitoIframe2.setAttribute("src", "https://www.cognitoforms.com/f/zqSmu7YHj0aGFnkCnk9mhQ/2");

                    /* Creating script to load the external cognito library  */
                    let scriptCognito = document.createElement("script");
                    /* Setting the original URL source of the cognito iframe */
                    scriptCognito.setAttribute("src", "https://www.cognitoforms.com/f/iframe.js");
                    scriptCognito.setAttribute("type", "text/javascript");
                    /* Adding to the Cognito container with the ID #cognitoHere */
                    let cognitoHere = document.querySelector('#cognitoHere');
                    cognitoHere.appendChild(scriptCognito);
                }, 3000);

                 /* Last Part: Lazy Cognito Form  */
                setTimeout(() => {
                    /* Note: Run this at least 500 milliseconds after the first part */
                    console.log('Loading Cognito')

                    /* Setting Iframe Cognito Styles  */
                    Cognito("#cognitoIframe").setCss("#cognito .cog-abuse {display: none;} .cog-branding  {display: none;};");

                    /* Sending prefill data */
                    Cognito("#cognitoIframe").prefill({"PageURL": window.location.href});

                    console.log('End lazy load Cognito form ');
                }, 3500);
                /* Lazy Cognito Form Ends */
            </script>
        </div>
        
    </div>

    <!--- How to calculate aspect ratio? -->
    Applying the aspect ratio calculator is very easy. You need to divide the original height by the original width and then multiply this number by the new width to get the new height. These steps will give you the correct height for your edited image.

    Take your original height. In our example, it will be 1200 pixs
    Take your original width. Our image has a width of 1600 pixs
    Divide the height by the width, e.g. 1200 / 1600 = 0.75
    Multiply the quotient by the preferred width, e.g. 0.75 * 300 = 225
    The resulting figure is your new height given in pixels.

    <!--- Defer Load Iframe Video -->
    <iframe src="" data-video="https://player.vimeo.com/video/658582624?h=00b6786d26"></iframe>
    <script defer>
        document.addEventListener('DOMContentLoaded', ()=>{

            function loadIframes(){

                // Variables 
                let iframeArray = document.querySelectorAll('iframe');
                let urlHome = 'https://' + window.location.hostname;
                let urlHome2 = urlHome + '/';
                let counter = 0;

                console.log("Event Scroll");

                // Loop Iframes
                iframeArray.forEach(element => {

                    // If the Iframe have an SRC empty
                    if(element.src == "" || element.src == urlHome  || element.src == urlHome2){
                        //Get the data-video URL
                        let videoSRC = element.getAttribute('data-video');

                        // If have a data-video URL
                        if(videoSRC){
                            //Increase counter
                            counter++;
                            //Add the video URL to the Iframe
                            element.src = videoSRC;
                        }
                    }
                });

                // If I didn't find any iframe to defer
                if(counter == 0){
                    // Remove Event Listener Scroll
                    document.removeEventListener("scroll", loadIframes);
                }
            }

            // Adding Event Listener Scroll
            document.addEventListener("scroll", loadIframes);
        
        })
    </script>
    
</body>

</html>
